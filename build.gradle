// QiWeb WDK Root Build
//
// Simple Gradle build that provide quick tasks accross other builds in
// subdirectories. It is also the holder of the Gradle Wrapper task.
//
// Other Gradle files in this directory are used by projets in subdirectories
// and allow to define common aspects of the build.

// TODO Factor this code out.


// Clean
//
task _clean_org_qiweb( type: GradleBuild, description: 'Clean org.qiweb' ) {
    buildFile = 'org.qiweb/build.gradle'
    tasks = [ 'clean' ]
}
task _clean_org_qiweb_gradle_tooling( type: GradleBuild, description: 'Clean org.qiweb.gradle-tooling' ) {
    buildFile = 'org.qiweb.gradle-tooling/build.gradle'
    tasks = [ 'clean' ]
}
task _clean_org_qiweb_gradle( type: GradleBuild, description: 'Clean org.qiweb.gradle', dependsOn: _clean_org_qiweb_gradle_tooling ) {
    buildFile = 'org.qiweb.gradle/build.gradle'
    tasks = [ 'clean' ]
}
task _clean_org_qiweb_maven( type: Exec, description: 'Clean org.qiweb.maven' ) {
    commandLine = [ 'mvn', '-f', 'org.qiweb.maven/pom.xml', 'clean' ]
}
task _clean_org_qiweb_samples_gradle( type: GradleBuild, description: 'Clean org.qiweb.samples using Gradle' ) {
    buildFile = 'org.qiweb.samples/build.gradle'
    tasks = [ 'clean' ]
}
task clean( 
    dependsOn: [
        _clean_org_qiweb, 
        _clean_org_qiweb_gradle, 
        //        _clean_org_qiweb_maven,
        _clean_org_qiweb_samples_gradle,
    ],
    description: 'Clean org.qiweb, org.qiweb.gradle and org.qiweb.samples' ) { }


// Check
//
task _check_org_qiweb( type: GradleBuild, description: 'Check org.qiweb' ) {
    buildFile = 'org.qiweb/build.gradle'
    tasks = [ 'check' ]
}
task _check_org_qiweb_gradle_tooling( type: GradleBuild, description: 'Check org.qiweb.gradle-tooling' ) {
    buildFile = 'org.qiweb.gradle-tooling/build.gradle'
    tasks = [ 'check' ]
}
task _check_org_qiweb_gradle( type: GradleBuild, description: 'Check org.qiweb.gradle', dependsOn: _check_org_qiweb_gradle_tooling ) {
    buildFile = 'org.qiweb.gradle/build.gradle'
    tasks = [ 'check' ]
}
task _check_org_qiweb_maven( type: Exec, description: 'Check org.qiweb.maven' ) {
    commandLine = [ 'mvn', '-nsu', '-f', 'org.qiweb.maven/pom.xml', 'package' ]
}
task _check_org_qiweb_samples_gradle( type: GradleBuild, description: 'Check org.qiweb.samples using Gradle' ) {
    buildFile = 'org.qiweb.samples/build.gradle'
    tasks = [ 'check' ]
}
task check( 
    dependsOn: [ 
        _check_org_qiweb, 
        _check_org_qiweb_gradle, 
        //        _check_org_qiweb_maven,
        _check_org_qiweb_samples_gradle,
    ],
    description: 'Check org.qiweb, org.qiweb.gradle and org.qiweb.samples' ) { }


// Assemble
//
task _assemble_org_qiweb( type: GradleBuild, description: 'Assemble org.qiweb' ) {
    buildFile = 'org.qiweb/build.gradle'
    tasks = [ 'assemble' ]
}
task _assemble_org_qiweb_gradle_tooling( type: GradleBuild, description: 'Assemble org.qiweb.gradle-tooling' ) {
    buildFile = 'org.qiweb.gradle-tooling/build.gradle'
    tasks = [ 'assemble' ]
}
task _assemble_org_qiweb_gradle( type: GradleBuild, description: 'Assemble org.qiweb.gradle', dependsOn: _assemble_org_qiweb_gradle_tooling ) {
    buildFile = 'org.qiweb.gradle/build.gradle'
    tasks = [ 'assemble' ]
}
task _assemble_org_qiweb_maven( type: Exec, description: 'Assemble org.qiweb.maven' ) {
    commandLine = [ 'mvn', '-nsu', '-f', 'org.qiweb.maven/pom.xml', 'package' ]
}
task _assemble_org_qiweb_samples_gradle( type: GradleBuild, description: 'Assemble org.qiweb.samples using Gradle' ) {
    buildFile = 'org.qiweb.samples/build.gradle'
    tasks = [ 'assemble' ]
}
task assemble( 
    dependsOn: [ 
        _assemble_org_qiweb, 
        _assemble_org_qiweb_gradle, 
        //        _assemble_org_qiweb_maven,
        _assemble_org_qiweb_samples_gradle,
    ],
    description: 'Assemble org.qiweb, org.qiweb.gradle and org.qiweb.samples' ) { }


// Install
//
task _install_org_qiweb( type: GradleBuild, description: 'Install org.qiweb' ) {
    buildFile = 'org.qiweb/build.gradle'
    tasks = [ 'install' ]
}
task _install_org_qiweb_gradle_tooling( type: GradleBuild, description: 'Install org.qiweb.gradle-tooling' ) {
    buildFile = 'org.qiweb.gradle-tooling/build.gradle'
    tasks = [ 'install' ]
}
task _install_org_qiweb_gradle( type: GradleBuild, description: 'Install org.qiweb.gradle', dependsOn: _install_org_qiweb_gradle_tooling ) {
    buildFile = 'org.qiweb.gradle/build.gradle'
    tasks = [ 'install' ]
}
task _install_org_qiweb_maven( type: Exec, description: 'Install org.qiweb.maven' ) {
    commandLine = [ 'mvn', '-nsu', '-f', 'org.qiweb.maven/pom.xml', 'install' ]
}
task _install_org_qiweb_samples_gradle( type: GradleBuild, description: 'Install org.qiweb.samples using Gradle' ) {
    buildFile = 'org.qiweb.samples/build.gradle'
    tasks = [ 'install' ]
}
task install( 
    dependsOn: [ 
        _install_org_qiweb, 
        _install_org_qiweb_gradle, 
        //        _install_org_qiweb_maven,
        _install_org_qiweb_samples_gradle,
    ],
    description: 'Install org.qiweb, org.qiweb.gradle and org.qiweb.samples' ) { }


// Gradle Wrapper
//
task wrapper( type: Wrapper, description: 'Creates and deploys the Gradle wrapper to the current directory.' ) {
    gradleVersion = '1.9-rc-2'
}

