
== Hello CLI QiWeb

To get started we will build a simple Hello World style example using the QiWeb CLI.

Keep in mind that the `qiweb` command:

- do not manage dependencies ;
- do not allow you to extend the build ;
- do not assemble applications ;
- do not run applications in production mode.

Meaning you have to manage your application dependencies and assembly yourself.
Theses limitations make this DevShell suitable for quick prototyping only.
Prefer the Gradle or Maven build systems integration.

=== Install qiweb CLI

Of course, you need a http://www.oracle.com/technetwork/java/javase/downloads/[Java 8 SDK] installed (check your
`JAVA_HOME` environment variable and ensure `java` and `javac` are available in `PATH`).

Now, here are the steps needed to install the `qiweb` command:

- Download the
https://repo.codeartisans.org/qiweb/org/qiweb/org.qiweb.cli/{qiweb-version}/org.qiweb.cli-{qiweb-version}-dist.zip[CLI distribution].
- Unzip it
- Prepend the `bin` directory to your `PATH` (ex: `export PATH="/opt/qiweb/bin:${PATH}"`)
- Use the `qiweb` executable on UN*X
- Use the `qiweb.bat` executable on Windows

TIP: Invoke `qiweb --help` to get a comprehensive help on each commands and options.

=== Create a new application

To create a new QiWeb application, use the `new` command of `qiweb`:

[source]
----
user@host ~ $ qiweb new hello-qiweb
New QiWeb Application generated in '/home/user/hello-qiweb'.
user@host ~ $ cd hello-qiweb/
user@host ~/hello-qiweb $
----


=== Run the application in development mode

To run a QiWeb application in development mode, use the `run` command of `qiweb`:

[source]
----
user@host ~/hello-qiweb $ qiweb run
 _____ _ _ _ _     _      ____          _____ _       _ _ 
|     |_| | | |___| |_   |    \ ___ _ _|   __| |_ ___| | |
|  |  | | | | | -_| . |  |  |  | -_| | |__   |   | -_| | |
|__  _|_|_____|___|___|  |____/|___|\_/|_____|_|_|___|_|_|
   |__|

Loading...
Compiling Application...
>> QiWeb DevShell starting...
>> Ready for requests on http(s)://127.0.0.1:23023!
----

TIP: If you want to change the listening address and port override `qiweb.http.address` and `qiweb.http.port` either
through the command line by adding `-Dqiweb.http.address=0.0.0.0` and `-Dqiweb.http.port=80` for example ; or in the
`application.conf` file.

You can now open your browser to http://localhost:23023/ to see the welcome page.

image::images/welcome.png[Welcome,640]


=== Created application walkthrough

The newly created application has a single HTTP route:

.`./src/main/resources/routes.conf`
[source,routes]
----
GET / controllers.Application.index
----

That points to this controller method:

.`./src/main/java/controllers/Application.java`
[source,java]
----
public Outcome index()
{
    return outcomes().ok( "Hello QiWeb" ).build();
}
----

IMPORTANT: Every QiWeb application need a secret.
This secret is a key used for cypher and signature operations, it must be unique per application.
`qiweb` generated a random one for you in `./src/main/resources/application.conf`.

Here is the project tree:

    ├── src
    │   └── main
    │       ├── java
    │       │   └── controllers
    │       │       └── Application.java            <= Controller Java Class
    │       └── resources
    │           ├── application.conf                <= Application Configuration
    │           └── routes.conf                     <= Routes
    │
    ├── build.gradle.example                        <= Example Gradle build file
    └── pom.xml.example                             <= Example Maven build file

You can see that applications generated by `qiweb` follow the well known maven directory tree convention.
Yes, it could have simplified things a bit to simply use `src`, `app` or `conf` directory names but this way it's
damn easy to add a Gradle or Maven build to such an application.

At the bottom of the tree you can see two example build files for Gradle and Maven.
The next two sections detail their usage.
